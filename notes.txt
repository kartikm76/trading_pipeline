Next Steps for Implementation
find . \( -path "./venv" -o -name "dist" -o -name ".git" \) -prune \
-o -type f \( -name "*.py" -o -name "*.sh" -o -name "*.yaml" -o -name "requirements.txt" \) \
-exec echo "--- FILE: {} ---" \; -exec cat {} \; > codebase_snapshot.txt

# add a new library
uv add "polars[fsspec,pyarrow]"

# Local Bootstrap
uv run python src/main.py --bootstrap
uv run python tests/inspect_tables.py

# Hybrid Test
ENV=hybrid uv run python tests/test_spark.py

# Production Bootstrap
# Steps before each run:
1. # Move everything back to landing
aws s3 mv s3://trading-pipeline/data/raw/staging/ s3://trading-pipeline/data/raw/landing/ --recursive
aws s3 mv s3://trading-pipeline/data/raw/processed/ s3://trading-pipeline/data/raw/landing/ --recursive

2. Drop Tables:
aws glue delete-table --database-name "trading_db" --name "strategy_signals"
aws glue delete-table --database-name "trading_db" --name "bronze_options_chain"
aws glue delete-table --database-name "trading_db" --name "enriched_options_silver"

3. Clear the warehouse physical files
aws s3 rm s3://trading-pipeline/iceberg-warehouse/ --recursive

4. Run:
./batch_control.sh prod