project:
  name: "Option Trading Pipeline"

data_format:
  raw: "csv"
  iceberg: "parquet"

storage:
  catalog_name: "glue_catalog"
  db_name: "trading_db"
  tables:
    bronze: "bronze_options_chain"
    silver: "enriched_options_silver"
    gold: "strategy_signals"

# [STRATEGY SWITCHBOARD]
strategies:
  - class: "LaymanSPYStrategy"
    active: "Y"
    underlying: "SPY"
  - class: "LaymanQQQStrategy"
    active: "N"
    underlying: "QQQ"
  - class: "IronCondorStrategy"  # Added and set to active
    active: "N"
    underlying: "SPY"

filters:
  - class: "ZeroDTEPolicy"
    active: "N"
  - class: "LiquidityPolicy"
    active: "N"
dev:
  catalog_type: "hadoop"
  use_location_clause: false
  raw_base_path: "./data/raw" # Local base
  warehouse: "./iceberg-warehouse/"

hybrid:
  catalog_impl: "org.apache.iceberg.aws.glue.GlueCatalog"
  io_impl: "org.apache.iceberg.aws.s3.S3FileIO"
  warehouse: "s3://trading-pipeline/iceberg-warehouse/"
  raw_base_path: "s3://trading-pipeline/data/raw"

prod:
  catalog_impl: "org.apache.iceberg.aws.glue.GlueCatalog"
  io_impl: "org.apache.iceberg.aws.s3.S3FileIO"
  use_location_clause: true
  write_mode: "merge-on-read"
  format_version: "2"
  warehouse: "s3://trading-pipeline/iceberg-warehouse/"
  raw_base_path: "s3://trading-pipeline/data/raw" # S3 base

scaling:
  batch_size: 15 # Centralized batch size for the control manager
  bootstrap:
    max_executors: 4
    executor_memory: "16G"
    driver_memory: "16G"
    shuffle_partitions: 1000
  daily:
    max_executors: 2
    executor_memory: "8G"
    driver_memory: "8G"
    shuffle_partitions: 1000

# [UNDERLYING SYMBOL MAPPING]
# Maps option symbols to their tradeable underlying ETF/stock
underlying_mapping:
  SPX: "SPY"   # S&P 500 Index → SPDR S&P 500 ETF
  NDX: "QQQ"   # Nasdaq-100 Index → Invesco QQQ ETF
  RUT: "IWM"   # Russell 2000 Index → iShares Russell 2000 ETF
  DJX: "DIA"   # Dow Jones Index → SPDR Dow Jones ETF
  VIX: "VXX"   # VIX Index → iPath S&P 500 VIX Short-Term Futures ETN